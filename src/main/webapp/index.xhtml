<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<f:metadata>
	<!-- TODO Apenas para fins de protótipo! Remover!  -->
	<f:viewAction action="#{carrinhoMB.inicializar}"/>
</f:metadata>	
<ui:composition template="/WEB-INF/template_cliente.xhtml">
	<ui:define name="titulo">SIGELI - Página Inicial</ui:define>
	<ui:define name="conteudo">
		<div class="well well-small">
			<h4>
				Mais vendidos
			</h4>
			<div class="row-fluid">
				<div id="featured" class="carousel slide">
					<div class="carousel-inner">
						<div class="item active">
							<ul class="thumbnails">
								<c:forEach items="#{indexMB.maisVendidos()}" var="livro" varStatus="status" begin="0" end="3">
									<li class="span3">
										<div class="thumbnail">
											<!-- TODO Apenas para fins de protótipo! Exibir capa do livro! -->
											<a href="livro.jsf?id=#{livro.id}">
												<img src="#{resource['cliente:images/livro.jpg']}" alt="" />
											</a>
											<div class="caption">
												<h5>
													<a href="livro.jsf?id=#{livro.id}">
														<h:outputText value="#{livro.titulo}" />
													</a>
												</h5>
												<h4>
													<a class="btn btn-ver" href="livro.jsf?id=#{livro.id}"><i class="icon-zoom-in"></i></a>
													<span class="pull-right">
														<h:outputText value="#{livro.preco}">
															<f:convertNumber locale="pt_BR" type="currency" />
														</h:outputText>
													</span>
												</h4>
											</div>
										</div>
									</li>
								</c:forEach>
							</ul>
						</div>
						<div class="item">
							<ul class="thumbnails">
								<c:forEach items="#{indexMB.maisVendidos()}" var="livro" varStatus="status" begin="4" end="7">
									<li class="span3">
										<div class="thumbnail">
											<!-- TODO Apenas para fins de protótipo! Exibir capa do livro! -->
											<a href="livro.jsf?id=#{livro.id}">
												<img src="#{resource['cliente:images/livro.jpg']}" alt="" />
											</a>
											<div class="caption">
												<h5>
													<a href="livro.jsf?id=#{livro.id}">
														<h:outputText value="#{livro.titulo}" />
													</a>
												</h5>
												<h4>
													<a class="btn btn-ver" href="livro.jsf?id=#{livro.id}"><i class="icon-zoom-in"></i></a>
													<span class="pull-right">
														<h:outputText value="#{livro.preco}">
															<f:convertNumber locale="pt_BR" type="currency" />
														</h:outputText>
													</span>
												</h4>
											</div>
										</div>
									</li>
								</c:forEach>
							</ul>
						</div>
					</div>
					<a class="left carousel-control" href="#featured" data-slide="prev">&lt;</a>
					<a class="right carousel-control" href="#featured"
						data-slide="next">&gt;</a>
				</div>
			</div>
		</div>
		<h4>Últimos lançamentos</h4>
		<ul class="thumbnails">
			<c:forEach items="#{indexMB.ultimosLancamentos()}" var="livro" varStatus="status">
				<c:choose>
				    <c:when test="#{status.count % 3 == 1}">
				        <c:set var="liClass" value="clear span3"/>
				    </c:when>
				    <c:otherwise>
				        <c:set var="liClass" value="span3"/>
				    </c:otherwise>
				</c:choose>
				<li class="#{liClass}">
					<div class="thumbnail">
						<!-- TODO Apenas para fins de protótipo! Exibir capa do livro! -->
						<a href="livro.jsf?id=#{livro.id}">
							<img src="#{resource['cliente:images/livro.jpg']}" alt="" />
						</a>
						<div class="caption">
							<h5>
								<a href="livro.jsf?id=#{livro.id}">
									<h:outputText value="#{livro.titulo}" />
								</a>
							</h5>
							<p><h:outputText value="#{livro.sinopseCurta}" /></p>
							<h4 style="text-align: center">
								<h:form prependId="false">
									<a class="btn" href="livro.jsf?id=#{livro.id}">
										<i class="icon-zoom-in"></i>
									</a>
									<a class="btn" jsf:action="#{carrinhoMB.adicionar(livro)}">Adicionar <i class="icon-shopping-cart"></i></a>
									<a class="btn btn-primary" href="livro.jsf?id=#{livro.id}">
										<h:outputText value="#{livro.preco}">
											<f:convertNumber locale="pt_BR" type="currency" />
										</h:outputText>
									</a>
								</h:form>
							</h4>
						</div>
					</div>
				</li>
			</c:forEach>
		</ul>
		<style>
		.btn-ver {
			width: 16px;
		}
		</style>
	</ui:define>
</ui:composition>
</html>